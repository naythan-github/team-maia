#!/bin/bash
# RAG Service - Simple Working Alternative
# Bypasses the problematic background service daemon

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

case "$1" in
    start)
        echo "âœ… RAG Service: Using direct GraphRAG queries (background service bypassed)"
        echo "   ğŸ“‹ Available: Manual indexing via rag_document_connectors.py"
        echo "   ğŸ” Available: Direct queries via graphrag_enhanced_knowledge_graph.py"
        echo "   ğŸ’¡ Status: Functional without background daemon"
        ;;
    stop)
        echo "âœ… RAG Service: No background processes to stop"
        ;;
    status)
        echo "ğŸ“Š RAG Service Status (Simplified Mode):"
        echo "   Running: âœ… Direct access available"
        echo "   Background daemon: âŒ Bypassed (performance issue)"
        echo "   GraphRAG queries: âœ… Available"
        echo "   Manual indexing: âœ… Available"
        echo "   Vector database: âœ… Available (208MB)"
        ;;
    scan)
        echo "ğŸ”„ Running manual scan..."
        echo "   Using direct connector instead of background service..."
        python3 "$SCRIPT_DIR/claude/tools/rag_document_connectors.py" "$2"
        ;;
    sources)
        echo "ğŸ“ Available RAG Sources:"
        echo "   âœ… GraphRAG Knowledge Graph: /claude/data/vector_db/"
        echo "   âœ… Direct indexing: claude/tools/rag_document_connectors.py"
        echo "   âœ… Query interface: claude/tools/graphrag_enhanced_knowledge_graph.py"
        ;;
    demo)
        echo "ğŸ“‹ RAG Service Demo (Simplified):"
        echo "   Testing direct RAG queries..."
        python3 "$SCRIPT_DIR/claude/tools/simple_rag_query.py" "Maia"
        ;;
    *)
        echo "RAG Service Management (Simplified Mode)"
        echo ""
        echo "Usage: $0 {start|stop|status|scan|sources|demo}"
        echo ""
        echo "Note: Background daemon bypassed due to performance issues."
        echo "Direct GraphRAG queries and manual indexing remain fully functional."
        ;;
esac